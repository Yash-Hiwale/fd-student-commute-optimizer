--- Frontend react.js

import React, { useState } from 'react';

function App() {
    const [username, setUsername] = useState('');
    const [userId, setUserId] = useState(null);
    const [origin, setOrigin] = useState('');
    const [destination, setDestination] = useState('');
    const [routeId, setRouteId] = useState(null);
    const [matches, setMatches] = useState([]);

    async function register() {
        const res = await fetch('http://localhost:3000/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username })
        });
        const data = await res.json();
        if (data.userId) setUserId(data.userId);
        else alert(data.error);
    }

    async function addRoute() {
        const originCoords = origin.split(',').map(Number); // e.g. "19.07,72.87"
        const destCoords = destination.split(',').map(Number);
        const res = await fetch('http://localhost:3000/add_route', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ userId, origin: originCoords, destination: destCoords })
        });
        const data = await res.json();
        if (data.routeId) setRouteId(data.routeId);
        else alert(data.error);
    }

    async function findMatches() {
        const res = await fetch(`http://localhost:3000/match_routes?routeId=${routeId}`);
        const data = await res.json();
        if (data.matches) setMatches(data.matches);
        else alert(data.error);
    }

    return (
        <div>
            {!userId && (
                <div>
                    <input placeholder="Username" value={username} onChange={e => setUsername(e.target.value)} />
                    <button onClick={register}>Register</button>
                </div>
            )}
            {userId && (
                <div>
                    <input placeholder="Origin lat,lng" value={origin} onChange={e => setOrigin(e.target.value)} />
                    <input placeholder="Destination lat,lng" value={destination} onChange={e => setDestination(e.target.value)} />
                    <button onClick={addRoute}>Add Route</button>
                    {routeId && <button onClick={findMatches}>Find Matches</button>}
                    <ul>
                        {matches.map(m => (
                            <li key={m.routeId}>
                                Match with user {m.userId}, Origin distance: {m.originDist.toFixed(2)} km, Destination distance: {m.destDist.toFixed(2)} km
                            </li>
                        ))}
                    </ul>
                </div>
            )}
        </div>
    );
}

export default App;
